--> Inspect / Troubleshoot Containers

-- Imagine you‚Äôre on-call as a DevOps Engineer üö®.
Your container is running fine, but the developer says:

==> ‚ÄúMy app stopped responding!‚Äù

You need to quickly find why ‚Äî check:
    - How the container was started
    - Which ports are mapped
    - What environment variables are inside
    - Whether the process is running
    - How much CPU and memory it‚Äôs using

That‚Äôs exactly what you‚Äôll learn here.

----------------------------------------------------------------

- To check the container logs
docker logs inspect-nginx

- To check the live logs

docker logs -f inspect-nginx

- Check Running Processes
docker top <container-name/id>

------------------------------------------------
- Monitor Resource Usage
docker stats


CONTAINER ID   NAME            CPU %   MEM USAGE / LIMIT   NET I/O     BLOCK I/O
abc12345efgh   inspect-nginx   0.00%   5.0MiB / 3.8GiB      1.5kB / 0B  8.2kB / 0B

Explanation:

CPU% ‚Üí how much processor it‚Äôs using
MEM USAGE ‚Üí RAM usage
NET I/O ‚Üí network traffic (bytes sent/received)
BLOCK I/O ‚Üí disk usage
Use Ctrl + C to exit monitoring.

---------------------------------
=====> Combine for Real-Time Troubleshooting

If a container is slow or unresponsive:

- Check logs ‚Üí docker logs -f <name>
- Check resources ‚Üí docker stats
- Check processes ‚Üí docker top
- Check config ‚Üí docker inspect

These four commands are your DevOps Toolkit for container diagnostics.

--------------------------------

Real-Time DevOps Example

Scenario:
A containerized Java app (myapp) keeps stopping unexpectedly.

==> Need to check

docker logs myapp     # check app error logs
docker inspect myapp  # verify restart policy and env vars
docker top myapp      # see if Java process still running
docker stats myapp    # monitor CPU/memory leaks

You discover OutOfMemoryError ‚Üí memory exceeded.

====================================00000000===============================


==> How Docker handles Logs internally

- /var/lib/docker/containers/<container-id>/<container-id>-json.log   -> The docker logs command actually reads from that file.That‚Äôs why we redirect or mount logs to host volumes for persistence.

-- Redirect Logs to a Host Directory (Persistent Logging)
- Let‚Äôs now save logs outside the container so they persist even if it‚Äôs deleted.
- Create a folder on your host:
    mkdir -p ~/docker-logs/nginx
- docker run -d --name nginx-log -p 8085:80 \
  -v ~/docker-logs/nginx:/var/log/nginx nginx

